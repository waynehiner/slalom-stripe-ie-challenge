<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Townsend Street Music Shop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="todo" />
    <link rel="stylesheet" href="assets/css/normalize.css" />
    <!-- <link rel="stylesheet" href="assets/css/global.css" /> -->
    <link rel="stylesheet" href="assets/css/videos.css" />
    <script src="assets/js/common.js" defer></script>
    <script src="assets/js/videos.js" defer></script>

</head>

<body>
    <div class="video-courses-container">
        <div class="items-section">
            <ul class="eco-navigation">
                <li style="margin-top: auto; margin-bottom: auto; height: 38px;"><img src="/assets/img/store_logo.svg"></li>
                <li><a href="/">Home</a></li>
                <li><a href="/concert">Concert Tickets</a></li>
                <li><a href="/videos">Video Courses</a></li>
                <li><a href="/lessons">Lessons Courses</a></li>
            </ul>
            <div class="sr-title" id="title">
                <h2>Video Courses</h2>
            </div>
            <div class="sr-instructions">
                Not ready to commit to lessons? These short video courses are designed to be fun, quickly teach you something,
                and let you get to know our expert teachers. Once you purchase the course, we'll send you a link to the video
                and you'll have access to it forever.
            </div>
            <div class="sr-body">
                <div id="sr-items" class="sr-items"></div>
            </div>
        </div>
        <div class="purchase-section">
            <div class="sr-main">
                <div class="sr-summary">
                    <h3>Purchase Summary</h3>
                    <div id="summary-preface" class="sr-legal-text left"></div>
                    <div id="summary-table" class="summary-table"></div>
                </div>
                <div class="sr-payment-form payment-view">
                    <h3>Payment details</h3>
                    <!-- Added id = payment-form -->
                    <div class="sr-form-row" id="payment-form">
                        <div class="sr-combo-inputs">
                            <div class="sr-combo-inputs-row">
                                <input type="text" id="name" placeholder="Name" autocomplete="cardholder"
                                       class="sr-input" />

                            </div>
                            <div class="sr-combo-inputs-row">
                                <input type="text" id="email" placeholder="Email" autocomplete="cardholder" />
                            </div>
                            <div class="sr-combo-inputs-row">
                                <!-- use this div for your card element -->
                                <div class="sr-input sr-card-element" id="card-element">
                                <!-- Challenge #2 | card element from videos.js -->
                                </div>
                            </div>
                        </div>
                        <div class="sr-field-error" id="card-errors" role="alert"></div>
                    </div>
                    <button id="submit">
                        <div class="spinner hidden" id="spinner"></div><span id="button-text">Purchase</span>
                    </button>
                    <div class="sr-legal-text">
                        Your card will be immediately charged
                    </div>
                </div>

                <div class="sr-section hidden completed-view">
                    <img style="display: inline; vertical-align: middle;" src="/assets/img/green_check_icon.svg">
                    <h3 class="order-status" id="order-status">Thank you for your order!</h3>
                    <p>
                        <div>Payment Id: <span id="payment-id"></span></div>
                        <div>Please check your email for download instructions.</div>
                    </p>
                    <button onclick="window.location.href='/videos'">Place Another Order</button>
                </div>
            </div><!-- end of main -->
        </div>
    </div>
    <!-- Challenge #2 | Payment Intent -->
    <script src="https://js.stripe.com/v3"></script>
    <!--<script src="https://js.stripe.com/v3/card.js"></script>-->

    <!--<script charset="utf-8">
        var stripe = Stripe('pk_test_51JVIrREjlXgkgTxwve4kGDsOieifc0Ct2F1ftzOJGrVZzjpZOEyTfjRxVrCPnKmxxtSHANJXgbtsDS6q6ItLhPb500cpXXLiTZ');
        var button = document.getElementById('submit');
        var amount = document.getElementById('summary-table');
        button.addEventListener('click', function (e) {
            e.preventDefault();
            fetch('/payment-intent', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    card[exp_month]: card_month.value,
                    card[exp_year]: card_year.value,
                    card[number]: card_number.value,
                    card[cvc]: card_cvc,
                }),
            })
                .then((response) => response.json())
                .then((session) => {
            //        fetch('/payment-intent', {
            //        method: 'POST',
            //            headers: {
            //            'Content-Type': 'application/json',
            //    },
            //        body: JSON.stringify({
            //            amount: amount.value,
            //            payment_method: card.id.value // not sure what the value is to be here rn
            //        }),
            //})

                    stripe.redirectToCheckout({ sessionId: session.id });
                })
                .catch((error) => {
                    console.error('Error: ', error);
                })
        });
    </script>-->

</body>

</html>
